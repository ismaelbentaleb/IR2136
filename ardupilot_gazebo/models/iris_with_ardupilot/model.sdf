<?xml version='1.0'?>

<sdf version="1.6">

  <model name="iris_demo">

    <include>

      <uri>model://iris_with_standoffs</uri>

    </include>


    <include>

      <uri>model://gimbal_small_2d</uri>

      <pose>0 -0.01 0.070 1.57 0 1.57</pose>

    </include>


    <joint name="iris_gimbal_mount" type="revolute">

      <parent>iris::base_link</parent>

      <child>gimbal_small_2d::base_link</child>

      <axis>

        <limit>

          <lower>0</lower>

          <upper>0</upper>

        </limit>

        <xyz>0 0 1</xyz>

        <use_parent_model_frame>true</use_parent_model_frame>

      </axis>

    </joint>


    <plugin name="rotor_0_blade_1" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>0.084 0 0</cp>

      <forward>0 1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_0</link_name>

    </plugin>

    <plugin name="rotor_0_blade_2" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>-0.084 0 0</cp>

      <forward>0 -1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_0</link_name>

    </plugin>


    <plugin name="rotor_1_blade_1" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>0.084 0 0</cp>

      <forward>0 1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_1</link_name>

    </plugin>

    <plugin name="rotor_1_blade_2" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>-0.084 0 0</cp>

      <forward>0 -1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_1</link_name>

    </plugin>


    <plugin name="rotor_2_blade_1" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>0.084 0 0</cp>

      <forward>0 -1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_2</link_name>

    </plugin>

    <plugin name="rotor_2_blade_2" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>-0.084 0 0</cp>

      <forward>0 1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_2</link_name>

    </plugin>


    <plugin name="rotor_3_blade_1" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>0.084 0 0</cp>

      <forward>0 -1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_3</link_name>

    </plugin>

    <plugin name="rotor_3_blade_2" filename="libLiftDragPlugin.so">

      <a0>0.3</a0>

      <alpha_stall>1.4</alpha_stall>

      <cla>4.2500</cla>

      <cda>0.10</cda>

      <cma>0.00</cma>

      <cla_stall>-0.025</cla_stall>

      <cda_stall>0.0</cda_stall>

      <cma_stall>0.0</cma_stall>

      <area>0.002</area>

      <air_density>1.2041</air_density>

      <cp>-0.084 0 0</cp>

      <forward>0 1 0</forward>

      <upward>0 0 1</upward>

      <link_name>iris::rotor_3</link_name>

    </plugin>


    <plugin name="arducopter_plugin" filename="libArduPilotPlugin.so">

      <fdm_addr>127.0.0.1</fdm_addr>

      <fdm_port_in>9002</fdm_port_in>

      <fdm_port_out>9003</fdm_port_out>

      <modelXYZToAirplaneXForwardZDown>0 0 0 3.141593 0 0</modelXYZToAirplaneXForwardZDown>

      <gazeboXYZToNED>0 0 0 3.141593 0 0</gazeboXYZToNED>

      <imuName>iris_demo::iris::iris/imu_link::imu_sensor</imuName>

      <connectionTimeoutMaxCount>5</connectionTimeoutMaxCount>

      <control channel="0">

        <type>VELOCITY</type>

        <offset>0</offset>

        <p_gain>0.20</p_gain>

        <i_gain>0</i_gain>

        <d_gain>0</d_gain>

        <i_max>0</i_max>

        <i_min>0</i_min>

        <cmd_max>2.5</cmd_max>

        <cmd_min>-2.5</cmd_min>

        <jointName>iris::rotor_0_joint</jointName>

        <multiplier>838</multiplier>

        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>

      </control>

      <control channel="1">

        <type>VELOCITY</type>

        <offset>0</offset>

        <p_gain>0.20</p_gain>

        <i_gain>0</i_gain>

        <d_gain>0</d_gain>

        <i_max>0</i_max>

        <i_min>0</i_min>

        <cmd_max>2.5</cmd_max>

        <cmd_min>-2.5</cmd_min>

        <jointName>iris::rotor_1_joint</jointName>

        <multiplier>838</multiplier>

        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>

      </control>

      <control channel="2">

        <type>VELOCITY</type>

        <offset>0</offset>

        <p_gain>0.20</p_gain>

        <i_gain>0</i_gain>

        <d_gain>0</d_gain>

        <i_max>0</i_max>

        <i_min>0</i_min>

        <cmd_max>2.5</cmd_max>

        <cmd_min>-2.5</cmd_min>

        <jointName>iris::rotor_2_joint</jointName>

        <multiplier>-838</multiplier>

        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>

      </control>

      <control channel="3">

        <type>VELOCITY</type>

        <offset>0</offset>

        <p_gain>0.20</p_gain>

        <i_gain>0</i_gain>

        <d_gain>0</d_gain>

        <i_max>0</i_max>

        <i_min>0</i_min>

        <cmd_max>2.5</cmd_max>

        <cmd_min>-2.5</cmd_min>

        <jointName>iris::rotor_3_joint</jointName>

        <multiplier>-838</multiplier>

        <controlVelocitySlowdownSim>1</controlVelocitySlowdownSim>

      </control>

    </plugin>


    <link name='camera_link'>

      <pose>0.15 0 0.05 0 0.52 0</pose>

      <inertial>

        <mass>0.01</mass>

        <inertia>

          <ixx>0.0001</ixx> <ixy>0</ixy> <ixz>0</ixz>

          <iyy>0.0001</iyy> <iyz>0</iyz> <izz>0.0001</izz>

        </inertia>

      </inertial>

      <visual name='visual_cam'>

        <geometry>

          <box>

            <size>0.02 0.02 0.02</size>

          </box>

        </geometry>

        <material>

          <script>

            <uri>file://media/materials/scripts/gazebo.material</uri>

            <name>Gazebo/Red</name>

          </script>

        </material>

      </visual>

      <sensor name="camera" type="camera">

        <camera>

          <horizontal_fov>1.047</horizontal_fov>

          <image>

            <width>640</width>

            <height>480</height>

            <format>R8G8B8</format>

          </image>

          <clip>

            <near>0.1</near>

            <far>100</far>

          </clip>

        </camera>

        <always_on>1</always_on>

        <update_rate>30</update_rate>

        <visualize>true</visualize>

        

        <plugin name="camera_controller" filename="libgazebo_ros_camera.so">

          <ros>

            <remapping>~/image_raw:=/camera/image_raw</remapping>

            <remapping>~/camera_info:=/camera/camera_info</remapping>

          </ros>

          <frame_name>camera_link</frame_name>

        </plugin>

      </sensor>

    </link>

    

    <joint name='camera_joint' type='fixed'>

      <parent>iris::base_link</parent> 

      <child>camera_link</child>

    </joint>

  </model>

</sdf> 
